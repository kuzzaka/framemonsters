# Фреймонстры

Для того, чтобы поучаствовать в игре вам нужно написать алгоритм для фреймонстра.

Алгоритм – это простой Node.js модуль, который экспортирует единственную функцию,  
принимающая на вход текущие координаты монстра (state), частичку карты (scope)  
и хранилище произвольных данных (context), не стираемое между ходами.

На выходе алгоритм должен вернуть одно из доступных действий в виде строки.

Пример простого алгоритма:

```js
module.exports = (state, scope, context) => {
    const actions = ['left', 'right', 'move', 'boom', 'shoot', 'dig', 'wait'];
    const action = actions[Math.floor(Math.random() * actions.length)];

    context.lastAction = action;

    return action;
}
```

Все монстры играют на одной карте и ходят по очереди. Игра запускает алгоритм монстра с параметрами, получает действие и пытается его выполнить. Расчёт действия ограничен по времени и не может быть больше 200ms (в противном случае монстр останется на месте).

<img width="750" alt="map2" src="https://cloud.githubusercontent.com/assets/4534405/25026159/c26b1680-20be-11e7-83c3-2d3c19e87358.png">

__Ваша основная цель__ – набрать как можно большее количество очков,   
убивая других монстров или раскапывая сокровища.

Игроки, набравшие наибольшее количество очков, получают ценные призы.

Подробное описание параметров и возможных действий смотри ниже.

### Как протестировать алгоритм

1. Установите [**Node.js 7**](https://nodejs.org/en/)
1. Склонируйте или скачайте этот репозиторий
1. Установите зависимости `npm install`
1. Разместите алгоритм в файле [__users/player.js__](./users/player.js)
1. Запустите игру `npm run start`
1. Откройте в браузере http://localhost:3000/
1. Наблюдайте, как ваш алгоритм сражается с двумя ботами [_users/easy-bot.js_](./users/easy-bot.js) и [_users/hard-bot.js_](./users/hard-bot.js)
1. Улучшайте свой алгоритм до тех пор, пока не будете готовы отправить его нам

### Как прислать решение

Если вы ещё не зарегистрировались, то это можно сделать [по ссылке](https://events.yandex.ru/surveys/4726/)

1. Скопируйте код целиком из файла __users/player.js__
1. Разместите код на [Github](https://github.com/) или [Gist](https://gist.github.com/) и пришлите ссылку на почту [dump2017_fronttalks@yandex-team.ru](mailto:dump2017_fronttalks@yandex-team.ru)
1. Или пришлите код прямо в теле письма на почту dump2017_fronttalks@yandex-team.ru

__Решение можно прислать сколь угодно раз!__

#### State (текущее положение монстра)

Приходит _первым параметром_ на вход в функцию и содержит текущие абсолютные координаты вашего монстра и направление его движения. Например:

```js
{ direction: 'left', x: 5, y: 4 }
```

#### Scope (окружение монстра)

Приходит _вторым параметром_ на вход в функцию и содержит частичку карты, которую монстр видит вокруг себя на две клетки в виде двумерного массива. Например:

```js
[ [ 'surface', 'surface', 'surface', 'obstacle', 'enemy-left' ],
  [ 'enemy-left', 'surface', 'surface', 'surface', 'surface' ],
  [ 'enemy-up', 'surface', 'user', 'surface', 'surface' ],
  [ 'surface', 'surface', 'enemy-down', 'obstacle', 'enemy-right' ],
  [ 'surface', 'obstacle', 'enemy-down', 'surface', 'surface' ] ]
```

В центре массива находится сам монстр (user), вокруг него могут быть следующие объекты:
* surface - свободная ячейка карты, куда можно продолжить движение
* obstacle – препятствие
* enemy-left – враг, с указанием направления его движения через «-»

При это левый-верхний угол массива всегда ближе к левому-верхнему углу карты,  
а правый-нижний – к правому-нижнему углу карты.

#### Context (персональное хранилище монстра)

Приходит _третьим параметром_ на вход в функцию и позволяет хранить произвольные данные, не стираемые между ходами. Это объект, который вы может перезаписать своим объектом или дополнить его:

```js
module.exports = (state, scope, context) => {
    const action = 'wait';

    context.lastAction = action;
    context.lastScope = scope;

    return action;
}
```

#### Действия

##### wait

Пропустить ход – монстр остаётся на месте и возможно просто поджидает свою жертву.

##### left

Поменять направление своего движения, повернувшись налево.

##### right

Поменять направление своего движения, повернувшись направо.

##### move

Сделать шаг вперёд по направлению своего движения.

* Если впереди свободная клетка – монстр передвигается на эту клекту
* Если впереди препятствие – монстр остаётся на месте
* Если впереди враг – монстр съедает его, получая __3 очка__.  Съеденный враг теряет __одно очко__ и пропускает __4 хода__

##### shoot

Выстрелить кислотным шаром через клетку вперёд по направлению своего движения, монстр при этом остаётся на месте.

Если на этой клетке был враг – монстр убивает его, получая __3 очка__.  Убитый враг теряет __одно очко__ и пропускает __4 хода__.

##### boom

Взорваться, уничтожив себя и всех врагов в радиусей __1 клетки__.

За каждого убитого врага, монстр получает __1 очко__, но при этом теряет __8 ходов__.

Убитые враги теряют __одно очко__ и пропускают __4 хода__

##### dig

Попробовать выкопать клад, монстр при этом остаётся на месте.

Если клад успешно выкопан, монстр получает __50 очков__.
